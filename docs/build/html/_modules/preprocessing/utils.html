
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>preprocessing.utils &#8212; MCSQ compiling 1.1 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../contents.html">MCSQ compiling 1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">preprocessing.utils</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for preprocessing.utils</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Python3 script with utility functions for preprocessing</span>
<span class="sd">Author: Danielly Sorato </span>
<span class="sd">Author contact: danielly.sorato@gmail.com</span>
<span class="sd">&quot;&quot;&quot;</span> 
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">groupby</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">nltk</span>

<span class="n">initial_sufix</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">reset_initial_sufix</span><span class="p">():</span>
	<span class="k">global</span> <span class="n">initial_sufix</span>
	<span class="n">initial_sufix</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">def</span> <span class="nf">update_survey_item_id</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
	<span class="k">global</span> <span class="n">initial_sufix</span>
	<span class="n">initial_sufix</span> <span class="o">=</span> <span class="n">initial_sufix</span> <span class="o">+</span> <span class="mi">1</span>
	<span class="n">survey_item_id</span> <span class="o">=</span> <span class="n">prefix</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">initial_sufix</span><span class="p">)</span>
	
	<span class="k">return</span> <span class="n">survey_item_id</span>

<span class="k">def</span> <span class="nf">get_survey_item_id</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
	<span class="k">global</span> <span class="n">initial_sufix</span>
	<span class="n">survey_item_id</span> <span class="o">=</span> <span class="n">prefix</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">initial_sufix</span><span class="p">)</span>

	<span class="k">return</span> <span class="n">survey_item_id</span>

<span class="k">def</span> <span class="nf">decide_on_survey_item_id</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">old_item_name</span><span class="p">,</span> <span class="n">new_item_name</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">old_item_name</span> <span class="o">==</span> <span class="n">new_item_name</span><span class="p">:</span>
		<span class="n">survey_item_id</span> <span class="o">=</span> <span class="n">get_survey_item_id</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">survey_item_id</span> <span class="o">=</span> <span class="n">update_survey_item_id</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>


	<span class="k">return</span> <span class="n">survey_item_id</span>


<div class="viewcode-block" id="recognize_standard_response_scales"><a class="viewcode-back" href="../../preprocessing_utils.html#preprocessing.utils.recognize_standard_response_scales">[docs]</a><span class="k">def</span> <span class="nf">recognize_standard_response_scales</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Recognizes special answer categories from EVS by testing the answer segment against the</span>
<span class="sd">	language dependent pattern definitions for the special categories.</span>

<span class="sd">	Args:</span>
<span class="sd">		param1 filename (string): input file name.</span>
<span class="sd">		param2 text (string): answer text segment.</span>

<span class="sd">	Returns: </span>
<span class="sd">		If a pattern was found, returns a string informing the special category,</span>
<span class="sd">		otherwise returns None.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="s1">&#39;CZE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Neví)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Neodpověděl|neodpověděl(a)|BEZ ODPOVĚDI)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Nehodí se)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>


	<span class="k">if</span> <span class="s1">&#39;ENG&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(don&#39;t know)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(refusal|no answer)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(not applicable)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span> 

	<span class="k">if</span> <span class="s1">&#39;FRE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(ne sait pas)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(pas de réponse|refus|sans réponse|sans reponse)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(ne s&#39;applique pas|Non applicable|Pas d&#39;application|Non concerné)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span> 

	<span class="k">if</span> <span class="s1">&#39;GER&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(weiß nicht|weiss nicht)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(verweigert|keine Antwort|Keine Antwort)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(trifft nicht zu|nicht zutreffend)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span> 

	<span class="k">if</span> <span class="s1">&#39;NOR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Vet ikke)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Ikke svar)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(NA)&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>


	<span class="k">if</span> <span class="s1">&#39;POR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(não sabe)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(não responde)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(não se aplica)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span>

	<span class="k">if</span> <span class="s1">&#39;RUS&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="k">if</span> <span class="s1">&#39;LV&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
			<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Затрудняюсь ответить|Не знает)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
			<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Отказ от ответа|Нет ответа)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
			<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(не соответствующий|не применимо)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
			<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
			<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Затрудняюсь ответить|Не знаю)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
			<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Отказ от ответа|Нет ответа)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
			<span class="k">if</span> <span class="s1">&#39;BY&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
				<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(вопрос не применим|не применимо)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(Не подходит|НЕ ПРИМЕНИМО)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

			<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
			<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
			<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
				<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">return</span> <span class="kc">None</span>

	<span class="k">if</span> <span class="s1">&#39;SPA&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">dk_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(No sabe)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">refusal_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(no contesta)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>
		<span class="n">dontapply_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;(no aplicable)&quot;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">dk_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dk&#39;</span>
		<span class="k">elif</span> <span class="n">refusal_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;refusal&#39;</span>
		<span class="k">elif</span> <span class="n">dontapply_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
			<span class="k">return</span> <span class="s1">&#39;dontapply&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="determine_country"><a class="viewcode-back" href="../../preprocessing_utils.html#preprocessing.utils.determine_country">[docs]</a><span class="k">def</span> <span class="nf">determine_country</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Determines the full name of the country, based on ISO code for country</span>
<span class="sd">	that is embedded in the file name.</span>

<span class="sd">	Args:</span>
<span class="sd">		param1 filename (string): input file name.</span>

<span class="sd">	Returns: </span>
<span class="sd">		full name of the country (string).</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="k">if</span> <span class="s1">&#39;_AT&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Austria&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_AZ&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Azerbaijan&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_BE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Belgium&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_BY&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Belarus&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_BG&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Bulgaria&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_CH&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Switzerland&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_CY&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="k">if</span> <span class="s1">&#39;TUR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
			<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Northern Cyprus&#39;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Cyprus&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_CZ&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Czech Republic&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_DE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Germany&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_DK&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Denmark&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_EE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Estonia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_ES&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Spain&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_FI&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Finland&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_FR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;France&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_GE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Georgia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_GB&#39;</span> <span class="ow">in</span> <span class="n">filename</span> <span class="ow">or</span> <span class="s1">&#39;SOURCE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Great Britain&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_GR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Greece&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_HV&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Bosnia and Herzegovina&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_HU&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Hungary&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_IE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Ireland&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_IT&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Italy&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_IS&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Iceland&#39;</span>		
	<span class="k">if</span> <span class="s1">&#39;_NIR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Northern Ireland&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_LU&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Luxembourg&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_LV&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Latvia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_LT&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Lithuania&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_MD&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Moldova&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_ME&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Montenegro&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_MK&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Macedonia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_MT&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Malta&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_NO&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Norway&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_NL&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Neatherlands&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_PT&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Portugal&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_PL&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Poland&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_RU&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Russian Federation&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_SE&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Sweden&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_SI&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Slovenia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_SK&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Slovakia&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_TR&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Turkey&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;_UA&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;Ukraine&#39;</span>


	<span class="k">return</span> <span class="n">country</span></div>


<div class="viewcode-block" id="determine_sentence_tokenizer"><a class="viewcode-back" href="../../preprocessing_utils.html#preprocessing.utils.determine_sentence_tokenizer">[docs]</a><span class="k">def</span> <span class="nf">determine_sentence_tokenizer</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Provide the sentence splitter suffix to instantiate it in accordance </span>
<span class="sd">	to the target language (information emebedded on filename).</span>

<span class="sd">	Args:</span>
<span class="sd">		param1 filename (string): input file name.</span>

<span class="sd">	Returns: </span>
<span class="sd">		a sentence splitter suffix (string) according to the target language.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="c1">#there is no sentence segmentation for bulgarian in NLTK.. </span>
	<span class="k">if</span> <span class="s1">&#39;BUL_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;turkish.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;CZE_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;czech.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;DAN_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;danish.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;DUT_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;dutch.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;ENG_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;english.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;EST_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;estonian.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;FRE_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;french.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;FIN_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;finnish.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;GER_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;german.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;GRE_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;greek.pickle&#39;</span>
	
	
	<span class="k">if</span> <span class="s1">&#39;ITA_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;italian.pickle&#39;</span>
	
	<span class="k">if</span> <span class="s1">&#39;NOR_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;norwegian.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;POL_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;polish.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;POR_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;portuguese.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;RUS_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;russian.pickle&#39;</span>

	<span class="k">if</span> <span class="s1">&#39;SPA_&#39;</span> <span class="ow">in</span> <span class="n">filename</span> <span class="ow">or</span> <span class="s1">&#39;CAT_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;spanish.pickle&#39;</span>
	
	<span class="k">if</span> <span class="s1">&#39;SLV_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;slovene.pickle&#39;</span>
	
	<span class="k">if</span> <span class="s1">&#39;SWE_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;swedish.pickle&#39;</span>
	<span class="k">if</span> <span class="s1">&#39;TUR_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;turkish.pickle&#39;</span>

	<span class="c1">#there is no sentence segmentation for louxemburgish in NLTK.. </span>
	<span class="k">if</span> <span class="s1">&#39;UKR_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;russian.pickle&#39;</span>
	<span class="c1">#there is no sentence segmentation for louxemburgish in NLTK.. </span>
	<span class="k">if</span> <span class="s1">&#39;LTZ_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;german.pickle&#39;</span>
	<span class="c1">#there is no sentence segmentation for maltese in NLTK.. </span>
	<span class="k">if</span> <span class="s1">&#39;MLT_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;turkish.pickle&#39;</span>
	<span class="c1">#there is no sentence segmentation for croatian in NLTK.. </span>
	<span class="k">if</span> <span class="s1">&#39;HRV_&#39;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
		<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="s1">&#39;turkish.pickle&#39;</span>
	

	<span class="k">return</span> <span class="n">sentence_splitter_suffix</span></div>




<div class="viewcode-block" id="get_sentence_splitter"><a class="viewcode-back" href="../../preprocessing_utils.html#preprocessing.utils.get_sentence_splitter">[docs]</a><span class="k">def</span> <span class="nf">get_sentence_splitter</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
	<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">	Decide what Instantiate Punkt Sentence Tokenizer from NLTK should be instantiated, according to </span>
<span class="sd">	the information embedded in the filename.</span>

<span class="sd">	Args:</span>
<span class="sd">		param1 filename (string): input file name.</span>

<span class="sd">	Returns: </span>
<span class="sd">		a sentence splitter (NLTK object) instantiated according to the target language.</span>
<span class="sd">	&quot;&quot;&quot;</span>
	<span class="n">sentence_splitter_prefix</span> <span class="o">=</span> <span class="s1">&#39;tokenizers/punkt/&#39;</span>
	<span class="n">sentence_splitter_suffix</span> <span class="o">=</span> <span class="n">determine_sentence_tokenizer</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
	<span class="n">sentence_splitter_path</span> <span class="o">=</span> <span class="n">sentence_splitter_prefix</span><span class="o">+</span><span class="n">sentence_splitter_suffix</span>
	<span class="n">sentence_splitter</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">sentence_splitter_path</span><span class="p">)</span>
	
	<span class="k">return</span> <span class="n">sentence_splitter</span></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../contents.html">MCSQ compiling 1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">preprocessing.utils</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Danielly Sorato.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>