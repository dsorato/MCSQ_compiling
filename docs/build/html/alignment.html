
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alignment based on item structure &#8212; MCSQ compiling 1.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Special Answer Categories and Modules" href="categoriesmodules.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="categoriesmodules.html" title="Special Answer Categories and Modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MCSQ compiling 1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" accesskey="U">Welcome to MCSQ compiling’s documentation!</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Alignment based on item structure</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-alignment.countryspecificrequest">
<span id="alignment-based-on-item-structure"></span><h1>Alignment based on item structure<a class="headerlink" href="#module-alignment.countryspecificrequest" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR01">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR01</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR01"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR01" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 1.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR02">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR02</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR02"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR02" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 2.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR03">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR03</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR03"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR03" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 3.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR04">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR04</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR04"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR04" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 4.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR05">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR05</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR05"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR05" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 5.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.ESSCountrySpecificR06">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">ESSCountrySpecificR06</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#ESSCountrySpecificR06"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.ESSCountrySpecificR06" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in ESS round 6.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.EVSCountrySpecificR03">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">EVSCountrySpecificR03</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#EVSCountrySpecificR03"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.EVSCountrySpecificR03" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in EVS round 3.</p>
</dd></dl>

<dl class="py class">
<dt id="alignment.countryspecificrequest.EVSCountrySpecificR04">
<em class="property">class </em><code class="sig-prename descclassname">alignment.countryspecificrequest.</code><code class="sig-name descname">EVSCountrySpecificR04</code><a class="reference internal" href="_modules/alignment/countryspecificrequest.html#EVSCountrySpecificR04"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.countryspecificrequest.EVSCountrySpecificR04" title="Permalink to this definition">¶</a></dt>
<dd><p>Item names of country specific questions in EVS round 4.</p>
</dd></dl>

<span class="target" id="module-alignment.alignment_based_on_item_structure"></span><dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.align_introduction_instruction_request">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">align_introduction_instruction_request</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">df_source</span></em>, <em class="sig-param"><span class="n">df_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#align_introduction_instruction_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.align_introduction_instruction_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns introduction, instruction and requests segments. Differently from response segments, these other item types can’t be
merged. There are five distinct cases to consider: 1) only source segments (df_target is empty), 2) only target segments (df_source is empty),
3) df_source has more segments than df_target 4) df_target has more segments than df_source and, 5) df_source and df_target have the
same number of segments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>param1</em>) – dataframe to store the questionnaire alignment.</p></li>
<li><p><strong>df_source</strong> (<em>param2</em>) – dataframe containing the data of the source questionnaire (always English).</p></li>
<li><p><strong>df_target</strong> (<em>param3</em>) – dataframe containing the data of the target questionnaire</p></li>
<li><p><strong>item_type</strong> (<em>param4</em>) – metadata that indicates if the dataframes contain introductions, instructions or requests.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.align_more_segments_in_source">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">align_more_segments_in_source</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">source_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#align_more_segments_in_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.align_more_segments_in_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the appropriate method for alignment with more segments in source dataframe, concerning the number
of pairless segments.
This method is called from a broader sets of cases contained in prepare_alignment_with_more_segments_in_source.
If there is only one pairless source segment, call treat_a_single_pairless_source(),
otherwise call treat_multiple_pairless_source_segments()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_source</strong> (<em>param1</em>) – list of source segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>list_target</strong> (<em>param2</em>) – list of target segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>sorted_aligments</strong> (<em>param3</em>) – sorted list segments aligned via best match strategy.</p></li>
<li><p><strong>source_segments_without_pair</strong> (<em>param4</em>) – indexes of pairless source segments</p></li>
<li><p><strong>df</strong> (<em>param5</em>) – dataframe to store the questionnaire alignment</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.align_more_segments_in_target">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">align_more_segments_in_target</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">target_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#align_more_segments_in_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.align_more_segments_in_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the appropriate method for alignment with more segments in target dataframe, concerning the number
of pairless segments.
This method is called from a broader sets of cases contained in prepare_alignment_with_more_segments_in_source.
If there is only one pairless target segment, call treat_a_single_pairless_target(),
otherwise call treat_multiple_pairless_target_segments()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>list_source</strong> (<em>param1</em>) – list of source segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>list_target</strong> (<em>param2</em>) – list of target segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>sorted_aligments</strong> (<em>param3</em>) – sorted list segments aligned via best match strategy.</p></li>
<li><p><strong>target_segments_without_pair</strong> (<em>param4</em>) – indexes of pairless target segments</p></li>
<li><p><strong>df</strong> (<em>param5</em>) – dataframe to store the questionnaire alignment</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.align_on_metadata">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">align_on_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">df_source</span></em>, <em class="sig-param"><span class="n">df_target</span></em>, <em class="sig-param"><span class="n">process_responses</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#align_on_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.align_on_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the appropriate method for alignment based on metadata.
Responses are aligned separately of other item types because answers are merged using the item value.
:param param1 df: dataframe to store the questionnaire alignment
:type param1 df: pandas dataframe
:param param2 df_source: dataframe containing the data of the source questionnaire (always English).
:type param2 df_source: pandas dataframe
:param param3 df_target: dataframe containing the data of the target questionnaire
:type param3 df_target: pandas dataframe
:param param4 process_responses: indicates if the response segments should be processed, country-specific answers are excluded by design.
:type param4 process_responses: boolean</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey items.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.align_responses">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">align_responses</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">df_source</span></em>, <em class="sig-param"><span class="n">df_target</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#align_responses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.align_responses" title="Permalink to this definition">¶</a></dt>
<dd><p>Aligns response segments by merging them on item_value metadata.
:param param1 df: dataframe to store the questionnaire alignment
:type param1 df: pandas dataframe
:param param2 df_source: dataframe containing the data of the source questionnaire (always English).
:type param2 df_source: pandas dataframe
:param param3 df_target: dataframe containing the data of the target questionnaire
:type param3 df_target: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned response segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.different_source_target_index_card_instructions">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">different_source_target_index_card_instructions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_index</span></em>, <em class="sig-param"><span class="n">target_index</span></em>, <em class="sig-param"><span class="n">aux_source</span></em>, <em class="sig-param"><span class="n">aux_target</span></em>, <em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#different_source_target_index_card_instructions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.different_source_target_index_card_instructions" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target instruction segments identified as showcard segments. For sake of simplicity,
when the source index and the target index of showcard segments are different, they are moved to the
first position in the isntruction list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_index</strong> (<em>param1</em>) – source showcard segment.</p></li>
<li><p><strong>target_index</strong> (<em>param2</em>) – target showcard segment.</p></li>
<li><p><strong>aux_source</strong> (<em>param3</em>) – auxiliary list of source segments being modified in outer loop (contains segments of same item_name and item_type).</p></li>
<li><p><strong>aux_target</strong> (<em>param4</em>) – auxiliary list of target segments being modified in outer loop (contains segments of same item_name and item_type).</p></li>
<li><p><strong>list_source</strong> (<em>param5</em>) – list of source segments (contains segments of same item_name and item_type).</p></li>
<li><p><strong>list_target</strong> (<em>param6</em>) – list of target segments (contains segments of same item_name and item_type).</p></li>
<li><p><strong>item_type</strong> (<em>param7</em>) – item_type metadata, can be REQUEST, INTRODUCTION or INSTRUCTION</p></li>
<li><p><strong>df</strong> (<em>param8</em>) – dataframe to store the questionnaire alignment</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.filter_by_module">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">filter_by_module</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df_source</span></em>, <em class="sig-param"><span class="n">df_target</span></em>, <em class="sig-param"><span class="n">module</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#filter_by_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.filter_by_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the source and target dataframes by the module that is being currently analyzed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_source</strong> (<em>param1</em>) – dataframe containing the data of the source questionnaire (always English).</p></li>
<li><p><strong>df_target</strong> (<em>param2</em>) – dataframe containing the data of the target questionnaire</p></li>
<li><p><strong>module</strong> (<em>param3</em>) – questionnaire module being currently analyzed in outer loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df_source (pandas dataframe) and param2 df_target (pandas dataframe). Source and target dataframes filtered
by the module specified by parameter.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.find_best_match">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">find_best_match</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#find_best_match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.find_best_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the best match for source and target segments (same item_type) based on the lenght of the segments.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>alignment (list). Alignment pair represented by the index of target and source segments being aligned
(index 0 = target,index 1 = source), selected with lenght of the segments strategy.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.get_original_index">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">get_original_index</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">source_segment_index</span></em>, <em class="sig-param"><span class="n">target_segment_index</span></em>, <em class="sig-param"><span class="n">aux_source</span></em>, <em class="sig-param"><span class="n">aux_target</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#get_original_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.get_original_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the original index of aligned segments, as the auxiliary lists are being modified and the indexes
does not correspond to the original ones.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type).
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type).
:type param2 list_target: list
:param param3 source_segment_index: source segment aligned in aux_source list.
:type param3 source_segment_index: int
:param param4 target_segment_index: target segment aligned in aux_target list.
:type param4 target_segment_index: int
:param param5 aux_source: auxiliary list of source segments being modified in outer loop (contains segments of same item_name and item_type).
:type param5 aux_source: list
:param param6 aux_target: auxiliary list of target segments being modified in outer loop (contains segments of same item_name and item_type).
:type param6 aux_target: list</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>original_index_target (int), original_index_source (int). Original indexes (in list_source, list_target) of source/target segments aligned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.get_study_metadata">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">get_study_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#get_study_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.get_study_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get study metadata embedded in filename. It can be retrieved either from
the source or the target file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>param1</em>) – name of either source or target file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>study (string). Metadata that identifies the study of the questionnaires that are being aligned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.get_target_language_country_metadata">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">get_target_language_country_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#get_target_language_country_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.get_target_language_country_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get target language/country metadata embedded in filename, to name the output aligned file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>param1</em>) – name of target file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>target_language_country (string). Metadata that identifies the language/country of the target questionnaire being aligned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.identify_showc_segment">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">identify_showc_segment</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#identify_showc_segment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.identify_showc_segment" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches in list_source, list_target if there are intructions that seem to be show card segments that should be aligned together.
This method was implemented as an additional strategy to align correctly instruction segments.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list
:param param3 item_type: item_type metadata being analyzed. In this method we want to consider only instruction segments.
:type param3 item_type: string</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>str indicating if instructions that follow the show card segments were found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.instantiate_country_specific_request_object">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">instantiate_country_specific_request_object</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">study</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#instantiate_country_specific_request_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.instantiate_country_specific_request_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiates the appropriate set of country-specific requests according to the study.
Country-specific requests are deleted from alignment by design because the answer categories
frequently change from country to country.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>study</strong> (<em>param1</em>) – study metadata, embedded in filenames.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>country_specific_requests (Python object). Instance of python object that encapsulates the item names of
the country specific questions.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.only_one_segment_in_source_align">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">only_one_segment_in_source_align</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">alignment</span></em>, <em class="sig-param"><span class="n">source_segment</span></em>, <em class="sig-param"><span class="n">target_segment</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">aux_target</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#only_one_segment_in_source_align"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.only_one_segment_in_source_align" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills the dataframe with remaining target segments that do not have source correspondencies.
This method is called when the dataframe contains one source segment to two or more target segments.
The alignment pair is defined in the find_best_match() method and the remaining target segments
are included in this method, respecting the structure order.
:param param1 alignment: Alignment pair represented by the index of target and source segments being aligned
:type param1 alignment: list
:param (index 0 = target:
:param index 1 = source):
:param selected with lenght of the segments strategy.:
:param param2 source_segment: source segment that has a match according to find_best_match().
:type param2 source_segment: list
:param param3 target_segment: target segment that has a match according to find_best_match().
:type param3 target_segment: list
:param param4 list_target: list of target segments (contains segments of same item_name and item_type)
:type param4 list_target: list
:param param5 aux_target: list of source segments, excluding the target_segment (contains segments of same item_name and item_type)
:type param5 aux_target: list
:param param6 df: dataframe to store the questionnaire alignment
:type param6 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.only_one_segment_in_target_align">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">only_one_segment_in_target_align</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">alignment</span></em>, <em class="sig-param"><span class="n">source_segment</span></em>, <em class="sig-param"><span class="n">target_segment</span></em>, <em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">aux_source</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#only_one_segment_in_target_align"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.only_one_segment_in_target_align" title="Permalink to this definition">¶</a></dt>
<dd><p>Fills the dataframe with remaining source segments that do not have target correspondencies.
This method is called when the dataframe contains one target segment to two or more source segments.
The alignment pair is defined in the find_best_match() method and the remaining source segments
are included in this method, respecting the structure order.
:param param1 alignment: Alignment pair represented by the index of target and source segments being aligned
:type param1 alignment: list
:param (index 0 = target:
:param index 1 = source):
:param selected with lenght of the segments strategy.:
:param param2 source_segment: source segment that has a match according to find_best_match().
:type param2 source_segment: list
:param param3 target_segment: target segment that has a match according to find_best_match().
:type param3 target_segment: list
:param param4 list_source: list of source segments (contains segments of same item_name and item_type)
:type param4 list_source: list
:param param5 aux_source: list of source segments, excluding the source_segment (contains segments of same item_name and item_type)
:type param5 aux_source: list
:param param6 df: dataframe to store the questionnaire alignment
:type param6 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.prepare_alignment_with_more_segments_in_source">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">prepare_alignment_with_more_segments_in_source</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#prepare_alignment_with_more_segments_in_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.prepare_alignment_with_more_segments_in_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the appropriate method for alignment with more segments in source dataframe, concerning the number
of pairless segments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>param1</em>) – dataframe to store the questionnaire alignment</p></li>
<li><p><strong>list_source</strong> (<em>param2</em>) – list of source segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>list_target</strong> (<em>param3</em>) – list of target segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>item_type</strong> (<em>param4</em>) – item_type metadata, can be REQUEST, INTRODUCTION or INSTRUCTION</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.prepare_alignment_with_more_segments_in_target">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">prepare_alignment_with_more_segments_in_target</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">df</span></em>, <em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#prepare_alignment_with_more_segments_in_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.prepare_alignment_with_more_segments_in_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls the appropriate method for alignment with more segments in target dataframe, concerning the number
of pairless segments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>param1</em>) – dataframe to store the questionnaire alignment</p></li>
<li><p><strong>list_source</strong> (<em>param2</em>) – list of source segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>list_target</strong> (<em>param3</em>) – list of target segments (contains segments of same item_name and item_type)</p></li>
<li><p><strong>item_type</strong> (<em>param4</em>) – item_type metadata, can be REQUEST, INTRODUCTION or INSTRUCTION</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.same_source_target_index_card_instructions">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">same_source_target_index_card_instructions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">source_index</span></em>, <em class="sig-param"><span class="n">target_index</span></em>, <em class="sig-param"><span class="n">aux_source</span></em>, <em class="sig-param"><span class="n">aux_target</span></em>, <em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">item_type</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#same_source_target_index_card_instructions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.same_source_target_index_card_instructions" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target instruction segments identified as showcard segments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_index</strong> (<em>param1</em>) – source showcard segment.</p></li>
<li><p><strong>target_index</strong> (<em>param2</em>) – target showcard segment.</p></li>
<li><p><strong>aux_source</strong> (<em>param3</em>) – auxiliary list of source segments being modified in outer loop (contains segments of same item_name and item_type).</p></li>
<li><p><strong>aux_target</strong> (<em>param4</em>) – auxiliary list of target segments being modified in outer loop (contains segments of same item_name and item_type).</p></li>
<li><p><strong>list_source</strong> (<em>param5</em>) – list of source segments (contains segments of same item_name and item_type).</p></li>
<li><p><strong>list_target</strong> (<em>param6</em>) – list of target segments (contains segments of same item_name and item_type).</p></li>
<li><p><strong>item_type</strong> (<em>param7</em>) – item_type metadata, can be REQUEST, INTRODUCTION or INSTRUCTION</p></li>
<li><p><strong>df</strong> (<em>param8</em>) – dataframe to store the questionnaire alignment</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.treat_a_single_pairless_source">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">treat_a_single_pairless_source</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">source_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#treat_a_single_pairless_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.treat_a_single_pairless_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target segments, in case where there is only one source segment without a pair.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list
:param param3 sorted_aligments: sorted list segments aligned via best match strategy.
:type param3 sorted_aligments: list
:param param4 source_segments_without_pair: index of pairless souce segment
:type param4 source_segments_without_pair: int
:param param5 df: dataframe to store the questionnaire alignment
:type param5 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.treat_a_single_pairless_target">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">treat_a_single_pairless_target</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">target_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#treat_a_single_pairless_target"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.treat_a_single_pairless_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target segments, in case where there is only one target segment without a pair.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list
:param param3 sorted_aligments: sorted list segments aligned via best match strategy.
:type param3 sorted_aligments: list
:param param4 target_segments_without_pair: index of pairless target segment
:type param4 target_segments_without_pair: int
:param param5 df: dataframe to store the questionnaire alignment
:type param5 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.treat_multiple_pairless_source_segments">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">treat_multiple_pairless_source_segments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">source_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#treat_multiple_pairless_source_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.treat_multiple_pairless_source_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target segments, in case where there are multiple source segments without a pair.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list
:param param3 sorted_aligments: sorted list segments aligned via best match strategy.
:type param3 sorted_aligments: list
:param param4 source_segments_without_pair: indexes of pairless souce segments
:type param4 source_segments_without_pair: list
:param param5 df: dataframe to store the questionnaire alignment
:type param5 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="alignment.alignment_based_on_item_structure.treat_multiple_pairless_target_segments">
<code class="sig-prename descclassname">alignment.alignment_based_on_item_structure.</code><code class="sig-name descname">treat_multiple_pairless_target_segments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">list_source</span></em>, <em class="sig-param"><span class="n">list_target</span></em>, <em class="sig-param"><span class="n">sorted_aligments</span></em>, <em class="sig-param"><span class="n">target_segments_without_pair</span></em>, <em class="sig-param"><span class="n">df</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/alignment/alignment_based_on_item_structure.html#treat_multiple_pairless_target_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#alignment.alignment_based_on_item_structure.treat_multiple_pairless_target_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Align source and target segments, in case where there are multiple target segments without a pair.
:param param1 list_source: list of source segments (contains segments of same item_name and item_type)
:type param1 list_source: list
:param param2 list_target: list of target segments (contains segments of same item_name and item_type)
:type param2 list_target: list
:param param3 sorted_aligments: sorted list segments aligned via best match strategy.
:type param3 sorted_aligments: list
:param param4 target_segments_without_pair: indexes of pairless target segments
:type param4 target_segments_without_pair: list
:param param5 df: dataframe to store the questionnaire alignment
:type param5 df: pandas dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>df (pandas dataframe) with newly aligned survey item segments.</p>
</dd>
</dl>
</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="categoriesmodules.html"
                        title="previous chapter">Special Answer Categories and Modules</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/alignment.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="categoriesmodules.html" title="Special Answer Categories and Modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MCSQ compiling 1.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="contents.html" >Welcome to MCSQ compiling’s documentation!</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Alignment based on item structure</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Danielly Sorato.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>